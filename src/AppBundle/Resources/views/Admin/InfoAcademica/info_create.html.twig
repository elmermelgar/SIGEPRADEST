{% extends 'base2.html.twig' %}
{% block active %}active-menu{% endblock %}


{% block styles %}
    <link href="{{ asset('public/assets/js/dataTables/dataTables.bootstrap.css') }}" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('public/assets/css/select2.min.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/css/bootstrap-select.min.css">
    <script src="http://momentjs.com/downloads/moment.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/js/bootstrap-select.min.js"></script>
{% endblock %}



{% block Header %}
    <div class="col-md-12">
        <ol class="breadcrumb">
            <li><a href="{{ path('admin') }}">Inicio</a></li>
            <li><a href="{{ path('verInfo') }}">Informacion Academica</a></li>
            <li class="active">Crear</li>
        </ol>
        <h2>Crear Nueva Informaci√≥n</h2>
    </div>
{% endblock %}


{% block body %}
    <div class="row-fluid sortable">
        <form class="form-horizontal" action="{{ path('createInfo') }}" method="POST" enctype="multipart/form-data"
              name="formulario2">

            <div class="box span12">

                <div class="box-content">

                    <fieldset>

                        <br><br>
                        <div class="col-md-6">
                            <div class="control-group">
                                <label class="control-label" for="prependedInput">ID Solicitud , Nombre del usuario </label>
                                <div class="controls">
                                    <div class="input-prepend">
                                        <label for="info"><br></label><select id="soli_fk" name="soli_fk" class="form-control">


                                            {% for usu_entity in usu  %}

                                                {% for soli in sol   %}

                                                    {%  if soli.idUi is empty %}


                                                    {% elseif   usu_entity.idUi == soli.idUi.idUi %}
                                                        <option value="{{ soli.idSolicitud }}" > {{ soli.idSolicitud }} , {{ usu_entity.nombre }}</option>


                                                    {% endif %}
                                                {% endfor %}
                                            {% endfor %}

                                            {% for soli in sol   %}
                                                {%  if soli.idUi is empty %}
                                                    <option value="{{ soli.idSolicitud }}" > {{ soli.idSolicitud }} </option>
                                                {% endif %}
                                            {% endfor %}



                                        </select>
                                    </div>
                                </div>
                            </div>


                            <br>
                            <div class="control-group">
                                <label class="control-label" for="prependedInput">Instituto</label>
                                <div class="controls">
                                    <div class="input-prepend">
                                        <input id="instituto_txt" class="form-control" name="instituto_txt"
                                               size="16" type="text" placeholder="Instituto" required>
                                    </div>
                                </div>
                            </div>

                            <br>
                        </div>


                        <div class="col-md-6">
                            <div class="control-group">
                                <br>
                                <label class="control-label" for="prependedInput">Titulo</label>
                                <div class="controls">
                                    <div class="input-prepend">
                                        <input id="titulo_txt" class="form-control" name="titulo_txt" size="16"
                                               type="text" placeholder="Titulo" required>
                                    </div>
                                </div>
                            </div>

                            <br><br>
                            <div>
                                <label class="control-label" for="prependedInput">Fecha de titulo</label><br>
                                <label for="calendario_cl"><br></label><input id="calendario_cl" name="calendario_cl" size="16" type="date" required>

                            </div>
                        </div>

                        <br><br>

                        <div class="col-md-12" style="text-align: center; margin-top: 10px">
                            <a onClick="validar()" type="submit" style="width: 30%;" class="btn btn-primary">
                                    Guardar Informacion
                            </a>

                            <a href="{{ path('verInfo') }}" onclick="cancelar()" id="cancel"  type="button" class="btn"  name="cancel"  style="width: 15%;"  >
                                Cancel
                            </a>
                        </div>

                    </fieldset>

                </div>
            </div><!--/span-->
        </form>
    </div><!--/row-->
{% endblock %}



{% block javascripts %}

    <script type="text/javascript">


        /*funciones para validar*/
        function validar() {

            var titulo1 = document.getElementById('titulo_txt').value;
            var instituto1 = document.getElementById('instituto_txt').value;


            var fechaObtenida1 = document.getElementById('calendario_cl').value;
            var fechaObtenida2 = moment(fechaObtenida1).format('DD/MM/YYYY');
            var fechaAhora = moment().format('DD/MM/YYYY');

            //console.log(fechaObtenida1 == '' ||titulo1.length == 0 || instituto1.length == 0);


            if (fechaObtenida1 == '' ||titulo1.length == 0 || instituto1.length == 0 ) {
                alertify.error("Complete todos los campos por favor");
            } else {
                         if (fechaObtenida2 < fechaAhora) {
                             /*identifica el nombre del formulario*/
                             //console.log(fechaObtenida1);
                             document.formulario2.submit();

                         } else {

                             alertify.error("La fecha de titulo es mayor a a fecha actual");

                    }
            }
        }

        /*funcion cancelar*/
        function cancelar() {

            alertify.error("Has cancelado la operacion")
            document.formulario2.href = " {{ path('verInfo') }}";

        }

    </script>
{% endblock %}